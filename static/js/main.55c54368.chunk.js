(this.webpackJsonppractice=this.webpackJsonppractice||[]).push([[0],{43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),i=n(28),s=n.n(i),l=(n(36),n(37),n(2)),o=n(4),d=n(21),u=n(10),b=n(13),m=n(12),j=n(11),h=n(6),f=[{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"}];function p(){return f.filter((function(e){return e}))}var v=[{_id:"5b21ca3eeb7f6fbccd471815",title:"Terminator",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:6,dailyRentalRate:2.5,publishDate:"2018-01-03T19:04:28.809Z",liked:!0},{_id:"5b21ca3eeb7f6fbccd471816",title:"Die Hard",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:5,dailyRentalRate:2.5},{_id:"5b21ca3eeb7f6fbccd471817",title:"Get Out",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:8,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471819",title:"Trip to Italy",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181a",title:"Airplane",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181b",title:"Wedding Crashers",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181e",title:"Gone Girl",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:7,dailyRentalRate:4.5},{_id:"5b21ca3eeb7f6fbccd47181f",title:"The Sixth Sense",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:4,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471821",title:"The Avengers",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:7,dailyRentalRate:3.5}];function O(e){var t=v.find((function(t){return t._id===e._id}))||{};return t.title=e.title,t.genre=f.find((function(t){return t._id===e.genreId})),t.numberInStock=e.numberInStock,t.dailyRentalRate=e.dailyRentalRate,t._id||(t._id=Date.now().toString(),v.push(t)),t}var g=function(e,t,n){var a=(n-1)*t,r=a+t;return e.slice(a,r)},x=n(15),y=n.n(x),S=function(e){var t=e.items,n=e.pageSize,r=e.onPaginate,c=e.pageNo,i=Math.ceil(t/n),s=y.a.range(1,i+1);return i<=1?null:Object(a.jsx)("div",{className:"",children:Object(a.jsx)("ul",{className:"pagination",children:s.map((function(e){return Object(a.jsx)("li",{className:c===e?"page-item active":"page-item",children:Object(a.jsx)("a",{onClick:function(){return r(e)},className:"page-link",children:e})},e)}))})})},k=function(e){var t=e.list,n=e.onItemSelect,r=e.idProperty,c=e.nameProperty,i=e.selectedGenre,s=function(e){return i!==e[c]?"list-group-item":"list-group-item active"};return Object(a.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(a.jsx)("li",{onClick:function(){return n(e[c])},className:s(e),children:e[c]},e[r]||e[c])}))})};k.defaultProps={idProperty:"_id",nameProperty:"name"};var N=k,I=function(e){var t=e.onLike,n=e.item;return Object(a.jsx)("i",{onClick:function(){return t(n)},style:{cursor:"pointer"},className:!0===n.liked?"fa fa-thumbs-up":"fa fa-thumbs-o-up"})},R=function(e){var t=e.clickEvent,n=e.item,r=e.buttonType;return Object(a.jsx)("button",{onClick:function(){return t(n)},className:"btn btn-".concat(r," btn-sm"),children:"Delete"})};R.defaultProps={buttonType:"success"};var _=R,C=function(e){var t=e.columns,n=e.onSort,r=e.sortColumn,c=function(e){return r.name===e&&"asc"===r.order?"fa fa-sort-asc":r.name===e&&"desc"===r.order?"fa fa-sort-desc":void 0};return Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:t.map((function(e){return Object(a.jsxs)("th",{style:{cursor:"pointer"},onClick:function(){return function(e){if(!e)return null;var t=Object(o.a)({},r);t.name===e&&(t.order="asc"===t.order?"desc":"asc"),t.name!==e&&(t.name=e,t.order="asc"),n(t)}(e.path)},children:[e.label," ",Object(a.jsx)("i",{className:c(e.path)})]},e.label||e.key)}))})})},w=function(e){var t=e.rows,n=e.columns,r=function(e,t){return t.content?t.content(e):y.a.get(e,t.path)};return Object(a.jsx)("tbody",{children:t.map((function(e){return Object(a.jsx)("tr",{children:n.map((function(t){return Object(a.jsx)("td",{children:r(e,t)},function(e,t){return e._id+(t.path||t.key)}(e,t))}))},e._id)}))})},T=function(e){var t=e.sortColumn,n=e.rows,r=e.columns,c=e.onSort;return Object(a.jsxs)("table",{className:"table mb-3",children:[Object(a.jsx)(C,{onSort:c,sortColumn:t,columns:r}),Object(a.jsx)(w,{rows:n,columns:r})]})},G=function(e){var t=e.movies,n=e.sortColumn,r=e.onSort,c=e.onLike,i=e.onDelete,s=[{path:"title",label:"Title",content:function(e){return Object(a.jsx)(h.b,{to:"/movies/".concat(e._id),children:e.title})}},{path:"genre.name",label:"Genre"},{path:"numberInStock",label:"Stock"},{path:"dailyRentalRate",label:"Rate"},{key:"like",content:function(e){return Object(a.jsx)(I,{onLike:function(){return c(e)},item:e})}},{key:"delete",content:function(e){return Object(a.jsx)(_,{clickEvent:function(){return i(e)},item:e,buttonType:"danger"})}}];return Object(a.jsx)(T,{rows:t,columns:s,sortColumn:n,onSort:r})},P=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],genres:[],pageSize:4,pageNo:1,selectedGenre:"",sortColumn:{name:"title",order:"asc"},searchQuery:""},e.handleDelete=function(t){var n=Object(d.a)(e.state.movies);n=n.filter((function(e){return e._id!==t._id})),e.setState({movies:n})},e.handleLike=function(t){var n=Object(d.a)(e.state.movies),a=n.indexOf(t);n[a]=Object(o.a)({},t),n[a].liked=!n[a].liked,e.setState({movies:n})},e.handlePagination=function(t){e.setState({pageNo:t})},e.handleGenreSelect=function(t){e.setState({selectedGenre:t,pageNo:1,searchQuery:""})},e.handleSort=function(t){e.setState({sortColumn:t})},e.handleChange=function(t){var n=t.target;e.setState({searchQuery:n.value,selectedGenre:"",pageNo:1})},e.getData=function(){var t=e.state,n=t.pageSize,a=t.pageNo,r=t.selectedGenre,c=t.sortColumn,i=t.searchQuery,s=t.movies,l=s;i?l=s.filter((function(e){return e.title.toLowerCase().includes(i.toLowerCase())})):""!==r&&"All Genres"!==r&&(l=s.filter((function(e){return e.genre.name===r})));var o=y.a.orderBy(l,[c.name],[c.order]);return{totalCount:l,data:g(o,n,a)}},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=[{name:"All Genres"}].concat(Object(d.a)(p()));this.setState({movies:v,genres:e})}},{key:"render",value:function(){var e=this.state,t=e.pageSize,n=e.pageNo,r=e.genres,c=e.selectedGenre,i=e.sortColumn,s=this.state.movies.length,l=this.getData(),o=l.totalCount,d=l.data;return 0===s?Object(a.jsx)("p",{children:"There are no movies in the database"}):Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(N,{list:r,onItemSelect:this.handleGenreSelect,selectedGenre:c})}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)(h.b,{to:"/new",className:"btn btn-primary mb-3",children:"New Movie"}),Object(a.jsxs)("p",{children:["There are ",o.length," movies in the database"]}),Object(a.jsx)("input",{type:"text",placeholder:"Search...",className:"form-control",value:this.state.searchQuery,onChange:this.handleChange}),Object(a.jsx)(G,{movies:d,sortColumn:i,onSort:this.handleSort,onLike:this.handleLike,onDelete:this.handleDelete}),Object(a.jsx)(S,{items:o.length,pageNo:n,pageSize:t,onPaginate:this.handlePagination})]})]})})}}]),n}(r.Component),A=function(){return Object(a.jsxs)("nav",{className:"navbar navbar-expand-md navbar-light bg-light mb-5",children:[Object(a.jsx)(h.b,{className:"navbar-brand",to:"/movies",children:"Vidly"}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),Object(a.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(a.jsxs)("div",{className:"navbar-nav",children:[Object(a.jsx)(h.c,{className:"nav-link ",to:"/movies",children:"Movies"}),Object(a.jsx)(h.c,{className:"nav-link",to:"/customers",children:"Customers"}),Object(a.jsx)(h.c,{className:"nav-link",to:"/rentals",children:"Rentals"}),Object(a.jsx)(h.c,{className:"nav-link",to:"/login",children:"Login"}),Object(a.jsx)(h.c,{className:"nav-link",to:"/register",children:"Register"})]})})]})},D=function(){return Object(a.jsx)("h1",{children:"Customers"})},L=function(){return Object(a.jsx)("h1",{children:"Rentals"})},F=function(){return Object(a.jsx)("h1",{children:"Notfound"})},q=n(5),M=n.n(q),B=n(17),z=n(30),Q=n(20),E=function(e){var t=e.name,n=e.label,r=e.error,c=Object(Q.a)(e,["name","label","error"]);return Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:t,children:n}),Object(a.jsx)("input",Object(o.a)(Object(o.a)({},c),{},{className:"form-control",name:t,id:t,autoComplete:"off"})),r&&Object(a.jsx)("div",{className:"alert alert-warning",children:r})]})};E.defaultProps={type:"text"};var U=E,V=function(e){var t=e.name,n=e.label,r=e.error,c=e.options,i=Object(Q.a)(e,["name","label","error","options"]);return Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:t,children:n}),Object(a.jsxs)("select",Object(o.a)(Object(o.a)({className:"form-control",id:t,name:t},i),{},{children:[Object(a.jsx)("option",{value:""}),c.map((function(e){return Object(a.jsx)("option",{value:e._id,children:e.name},e._id)}))]})),r&&Object(a.jsx)("div",{className:"alert alert-warning",children:r})]})},J=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={details:{},errors:{}},e.renderInput=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",c=e.state,i=c.details,s=c.errors;return Object(a.jsx)(U,{name:t,type:r,label:n,value:i[t],error:s[t],onChange:e.handleChange})},e.validateOnSubmit=function(){var t=Object(o.a)({},e.state.details),n=Object(o.a)({},e.state.errors),a=M.a.validate(t,e.schema,{abortEarly:!1}).error;if(!a)return null;var r,c=Object(z.a)(a.details);try{for(c.s();!(r=c.n()).done;){var i=r.value;n[i.path[0]]=i.message}}catch(s){c.e(s)}finally{c.f()}return a?n:null},e.handleSubmit=function(t){t.preventDefault();var n=e.validateOnSubmit();n?e.setState({errors:n}):e.doSubmit()},e.validateInput=function(t){var n=t.name,a=t.value,r=Object(B.a)({},n,a),c=Object(B.a)({},n,e.schema[n]),i=M.a.validate(r,c).error;return null!==i?i.details[0].message:null},e.handleChange=function(t){var n=Object(o.a)({},e.state.errors),a=Object(o.a)({},e.state.details),r=t.target,c=e.validateInput(r);n[r.name]=c,e.setState({errors:n}),a[r.name]=r.value,e.setState({details:a})},e.renderButton=function(t){return Object(a.jsx)("button",{className:"btn btn-primary",disabled:e.validateOnSubmit(),children:t})},e.renderSelect=function(t,n,r){var c=e.state,i=c.details,s=c.errors;return Object(a.jsx)(V,{name:t,label:n,options:r,value:i[t],error:s[t],onChange:e.handleChange})},e}return n}(r.Component),K=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={details:{title:"",genreId:"",numberInStock:"",dailyRentalRate:""},genres:[],errors:{}},e.schema={_id:M.a.string(),title:M.a.string().required().label("Title"),genreId:M.a.string().required().label("Genre"),numberInStock:M.a.number().integer().required().min(0).max(100).label("Number In Stock"),dailyRentalRate:M.a.number().required().min(0).max(10).label("Daily Rental Rate")},e.doSubmit=function(){O(e.fixKeyValues()),e.props.history.push("/movies")},e.fixKeyValues=function(){var t=Object(o.a)({},e.state.details);return{_id:t._id||"",title:t.title,genreId:t.genreId,numberInStock:t.numberInStock,dailyRentalRate:t.dailyRentalRate}},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.props.match.params.movieId,n=(e=t,v.find((function(t){return t._id===e})));if(t&&!n)return this.props.history.replace("/not-found");var a=p();this.setState({genres:a});var r=Object(o.a)({},this.state.details);t&&(r._id=n._id,r.title=n.title,r.genreId=n.genre._id,r.numberInStock=n.numberInStock,r.dailyRentalRate=n.dailyRentalRate,this.setState({details:r}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"",children:[Object(a.jsxs)("h1",{className:"mb-5",children:["Movies Form ",this.props.match.params.movieId]}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("title","Title"),this.renderSelect("genreId","Genre",this.state.genres),this.renderInput("numberInStock","Number In Stock"),this.renderInput("dailyRentalRate","Daily Rental Rate"),this.renderButton("Save")]})]})}}]),n}(J),H=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={details:{username:"",password:""},errors:{}},e.schema={username:M.a.string().required().label("Username"),password:M.a.string().required().label("Password")},e.doSubmit=function(){console.log("submitted")},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("h1",{className:"mb-5",children:"Login"}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("username","Username"),this.renderInput("password","Password","password"),this.renderButton("submit")]})]})}}]),n}(J),W=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={details:{username:"",password:"",name:""},errors:{}},e.schema={username:M.a.string().email().required("Username"),password:M.a.string().min(5).required("Password"),name:M.a.string().required().label("Name")},e.doSubmit=function(){console.log("registered")},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("h1",{className:"mb-5",children:"Register Form"}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("username","Username","email"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("register")]})]})}}]),n}(J),Z=function(){return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(A,{}),Object(a.jsx)("section",{className:"container",children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:"/new",component:K}),Object(a.jsx)(l.b,{path:"/login",component:H}),Object(a.jsx)(l.b,{path:"/register",component:W}),Object(a.jsx)(l.b,{path:"/movies/:movieId",component:K}),Object(a.jsx)(l.b,{path:"/movies",component:P}),Object(a.jsx)(l.b,{path:"/customers",component:D}),Object(a.jsx)(l.b,{path:"/rentals",component:L}),Object(a.jsx)(l.b,{path:"/not-found",component:F}),Object(a.jsx)(l.a,{from:"/",exact:!0,to:"/movies"}),Object(a.jsx)(l.a,{to:"/not-found"})]})})]})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};s.a.render(Object(a.jsx)(h.a,{children:Object(a.jsx)(Z,{})}),document.getElementById("root")),X()}},[[43,1,2]]]);
//# sourceMappingURL=main.55c54368.chunk.js.map